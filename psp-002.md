<!-- markdownlint-disable MD024 -->

# JSON-RPC Interfaces for Polkadot Nodes

* **PSP Number:** 002
* **Authors:** Fabio Lama <github.com/lamafab, fabio@web3.foundation>
* **Status:** Work in Progress
* **Created:** 2020-01-03
* **Reference Implementation:** <https://github.com/paritytech/substrate>

## Summary

This standard describes the JSON-RPC interfaces that Polkadot node implementations should provide, including each function call's parameter types, behavior and possible return values.

## Motivation

This standard should serve as  common ground for API endpoints in order for external applications to be able to reuse existing functionality on various implementations of the Polkadot node. Avoiding disparity among node implementations will simplify their development, as well as allow applications which use different node implementations to switch seamlessly between them.

## Specification

[JSON-RPC](https://www.jsonrpc.org/specification) is a stateless, light-weight remote procedure call (RPC) protocol. Primarily this specification defines several data structures and the rules around their processing. It is transport agnostic in that the concepts can be used within the same process, over sockets, over http, or in many various message passing environments. It uses [JSON](https://www.json.org/json-en.html) ([RFC 4627](https://www.ietf.org/rfc/rfc4627.txt)) as data format.

All parameters in the specified JSON-RPC methods are **REQUIRED**, unless explicitly mentioned otherwise (**OPTIONAL**). Return values which are OPTIONAL indicate the possibility of `null` being returned.

Additionally, the JSON-RPC API should be made available over the [WebSocket Protocol](https://tools.ietf.org/html/rfc6455).

### Safety

Exposing RPC calls to the public may open up a huge surface of attacks, such as denial or service attacks, and has to be carefully considered. There are quite a few RPC methods that should be never (or rarely) directly exposed. Those methods are considered **UNSAFE** and are explicitly highlighted.

The implementation of this specification must disable the JSON API by default and should offer four different flags (for the RPC/TCP and the RPC/WebSocket interface each) in order to enable specific parts of the API. Two flags for exposing safe and unsafe PRC to localhost only, and two flags for exposing safe and unsafe RPC to all interfaces.

| API / Network | Localhost                 | All interfaces             |
| ------------- | ------------------------- | -------------------------- |
| Safe API      | `--local-{rpc|ws}`        | `--public-{rpc|ws}`        |
| Unsafe API    | `--local-unsafe-{rpc|ws}` | `--public-unsafe-{rpc|ws}` |

**Warning**: Enabling `--public-unsafe-{rpc|ws}` is dangerous and should be avoided.

### Errors

Each namespace specifies RPC error code ranges of possible error types that can be returned. Known error types are defined in this document and some APIs may return undefined error messages. Defined error messages are subject to expansion and changes.

## JSON-PRC methods

* [System](#System)
  * [Errors](#System-Errors)
  * [system_name](#system_name)
  * [system_version](#system_version)
  * [system_chain](#system_chain)
  * [system_properties](#system_properties)
  * [system_health](#system_health)
  * [system_peers](#system_peers)
  * [system_networkState](#system_networkState)
  * [system_addReservedPeer](#system_addReservedPeer)
  * [system_removeReservedPeer](#system_removeReservedPeer)
  * [system_nodeRoles](#system_nodeRoles)
  * [system_accountNextIndex](#system_accountNextIndex)
* [Author](#Author)
  * [Errors](#Author-Errors)
  * [author_submitExtrinsic](#author_submitExtrinsic)
  * [author_pendingExtrinsics](#author_pendingExtrinsics)
  * [author_removeExtrinsic](#author_removeExtrinsic)
  * [author_insertKey](#author_insertKey)
  * [author_rotateKeys](#author_rotateKeys)
  * [author_hasSessionKeys](#author_hasSessionKeys)
  * [author_hasKey](#author_hasKey)
* [Chain](#Chain)
  * [Errors](#Chain-Errors)
  * [chain_getHeader](#chain_getHeader)
  * [chain_getBlock](#chain_getBlock)
  * [chain_getBlockHash](#chain_getBlockHash)
  * [chain_getFinalizedHead](#chain_getFinalizedHead)
* [Offchain](#Offchain)
  * [Errors](#Offchain-Errors)
  * [offchain_localStorageSet](#offchain_localStorageSet)
  * [offchain_localStorageGet](#offchain_localStorageGet)
  * [offchain_localStorageGet](#offchain_localStorageGet)
* [State](#State)
  * [Errors](#State-Errors)
  * [state_call](#state_call)
  * [state_getPairs](#state_getPairs)
  * [state_getKeysPaged](#state_getKeysPaged)
  * [state_getStorage](#state_getStorage)
  * [state_getStorageHash](#state_getStorageHash)
  * [state_getStorageSize](#state_getStorageSize)
  * [state_getChildKeys](#state_getChildKeys)
  * [state_getChildStorage](#state_getChildStorage)
  * [state_getChildStorageHash](#state_getChildStorageHash)
  * [state_getChildStorageSize](#state_getChildStorageSize)
  * [state_getRuntimeVersion](#state_getRuntimeVersion)
  * [state_queryStorage](#state_queryStorage)
* [Engine](#Engine)
  * [Errors](#Engine-Errors)
  * [engine_createBlock](#engine_createBlock)
  * [engine_finalizeBlock](#engine_finalizeBlock)
* [Payment](#Payment)
  * [Errors](#Payment-Errors)
  * [payment_queryInfo](#payment_queryInfo)
* [Contracts](#Contracts)
  * [Errors](#Contracts-Errors)
  * [contracts_call](#contracts_call)
  * [contracts_getStorage](#contracts_getStorage)
* [BABE](#BABE)
  * [Errors](#BABE-Errors)
  * [babe_epochAuthorship](#babe_epochAuthorship)

## System

System RPC API.

### System Errors

RPC error codes are in the `2000` - `2999` range. No known error types are specified.

### system_name

Get the node's implementation name.

#### Parameters

None.

#### Returns

`STRING` - The node's name.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_name", "params":[]}'

// Response
{"jsonrpc":"2.0","result":"parity-polkadot","id":1}
```

### system_version

Get the node implementation's version. Should be a semver string.

#### Parameters

None.

#### Returns

`STRING` - The node's version.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_version", "params":[]}'

// Response
{"jsonrpc":"2.0","result":"0.7.20","id":1}
```

### system_chain

Get the chain's type. Given as a string identifier.

#### Parameters

None.

#### Returns

`STRING` - The chain's type.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_chain", "params":[]}'

// Response
{"jsonrpc":"2.0","result":"Kusama CC3","id":1}
```

### system_properties

Get a custom set of properties as a JSON object, defined in the chain spec.

*TODO*: Link to the PSP about the chain spec file, once finalized.

#### Parameters

None.

#### Returns

* `OBJECT`
  * `STRING`: `VALUE` - (OPTIONAL) Property name and value

**Note**: The type of `VALUE` varies depending on the chain spec.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_properties", "params":[]}'

// Response
{"jsonrpc":"2.0","result":{"ss58Format":2,"tokenDecimals":12,"tokenSymbol":"KSM"},"id":1}
```

### system_health

Return health status of the node.

Node is considered healthy if it is:

* Connected to some peers (unless running in dev mode).
* Not performing a major sync.

#### Parameters

None.

#### Returns

* `OBJECT`
  * `"isSyncing"`: `BOOL` - Whether the node is syncing.
  * `"peers"`: `U32` - Number of connected peers.
  * `"shouldHavePeers"`: `BOOL` - Should this node have any peers. Might be false for local chains or when running without discovery.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_health", "params":[]}'

// Response
{"jsonrpc":"2.0","result":{"isSyncing":false,"peers":46,"shouldHavePeers":true},"id":1}
```

### system_peers

Returns currently connected peers.

#### Parameters

None.

#### Returns

* `ARRAY` - (OPTIONAL)
  * `OBJECT`
    * `"PeerId"`: `STRING` - Peer ID.
    * `"roles"`: `STRING` - Roles of the node. One of the following values is possible:
      * `"NONE"` - No network.
      * `"FULL"` - Full node, does not participate in consensus.
      * `"LIGHT"` - Light client node.
      * `"AUTHORITY"` - Acts as an authority.
    * `"protocolVersion"`: `U32` - Protocol version.
    * `"bestHash"`: `STRING` - Peer best block hash.
    * `"bestNumber"`: `U64` - Peer best block number.

*TODO*: This should have the same `roles` types as `system_nodeRoles`.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_peers", "params":[]}'

// Response
{"jsonrpc":"2.0","result":[{"bestHash":"0x603b65f208656860f7d31f494896ac2ddcff37674442a84dfbcc1de0eacd83e2","bestNumber":1193270,"peerId":"QmTjJKhuLXKg9CfKkgGgJrzZ7LVfSmSUkQqFfZk1prF7LE","protocolVersion":6,"roles":"AUTHORITY"},{"bestHash":"0x603b65f208656860f7d31f494896ac2ddcff37674442a84dfbcc1de0eacd83e2","bestNumber":1193270,"peerId":"Qme89h5f5MkdN37R173z5GSJVBVSGeUriSrp4u3Y2ZRmUv","protocolVersion":6,"roles":"AUTHORITY"}],"id":1}
```

### system_networkState

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns current state of the network. **Warning**: This API is not stable.

#### Parameters

#### Returns

#### Example

```bash
```

### system_addReservedPeer

**Warning**: This method is [UNSAFE](#Safety).

Adds a reserved peer. The string parameter should encode a `p2p` multiaddr.

`/ip4/198.51.100.19/tcp/30333/p2p/QmSk5HQbn6LhUwDiNMseVUjuRYhEtYj4aUZ6WfWoGURpdV` is an example of a valid, passing multiaddr with PeerId attached.

#### Parameters

* `STRING` - Multiaddr to be added.

#### Returns

None.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_addReservedPeer", "params":["/ip4/198.51.100.19/tcp/30333/p2p/QmSk5HQbn6LhUwDiNMseVUjuRYhEtYj4aUZ6WfWoGURpdV"]}'

// Response
{"jsonrpc":"2.0","result":null,"id":1}
```

### system_removeReservedPeer

**Warning**: This method is [UNSAFE](#Safety).

Remove a reserved peer. The string should encode only the PeerId e.g. `QmSk5HQbn6LhUwDiNMseVUjuRYhEtYj4aUZ6WfWoGURpdV`.

#### Parameters

* `STRING` - Peer ID to be removed.

#### Returns

None.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_removeReservedPeer", "params":["QmSk5HQbn6LhUwDiNMseVUjuRYhEtYj4aUZ6WfWoGURpdV"]}'

// Response
{"jsonrpc":"2.0","result":null,"id":1}

```

### system_nodeRoles

Returns the roles the node is running as.

#### Parameters

None.

#### Returns

* `ARRAY`
  * `STRING` - One of the following values is possible:
    * `"Full"` - The node is a full node.
    * `"LightClient"` - The node is a a light client.
    * `"Authority"` - The node is an authority.
    * `"UnknownRole"`: `ARRAY` - An unknown role followed by an arbitrary byte value.
      * `U8` - Undefined value.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_nodeRoles", "params":[]}'

// Response
{"jsonrpc":"2.0","result":["Authority"],"id":1}
```

### system_accountNextIndex

Returns the next valid index (aka. nonce) for given account.

This method takes into consideration all pending transactions currently in the pool and if no transactions are found in the pool it fallbacks to query the index from the runtime (aka. state nonce).

Alias: `account_nextIndex`

#### Parameters

* `STRING` - The address of the account.

#### Returns

* `U64` - The nonce of the account.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "system_accountNextIndex", "params":["FJaSzBUAJ1Nwa1u5TbKAFZG5MBtcUouTixdP7hAkmce2SDS"]}'

// Response
{"jsonrpc":"2.0","result":35,"id":1}
```

## Author

Authoring RPC API.

### Common types
#### Key types

Polkadot separates keys into different types, depending on its use-case. Following variants are available.

* `"babe"` - Babe functionality.
* `"gran"` - GRANDPA functionality.
* `"acco"` - Controlling an account.
* `"aura"` - Aura functionality.
* `"imon"` - *ImOnline* functionality.
* `"audi"` - Authority discovery functionality.
* `"dumy"` - Useful for testing.

#### Author Errors

RPC error codes are in the `1000` - `1999` range. The following known error types are possible:

* *BadFormat*
  * Occurrence: incorrect extrinsic format.
  * RPC code: 1001
  * RPC message: "Extrinsic has invalid format: ${details}"
    * *${details}*: details of the error message.
* *Verification*
  * Occurrence: verification error.
  * RPC code: 1002
  * RPC message: "Extrinsic verification error: ${details}"
    * *${details}*: details of the error message.
* *Pool*
  * *InvalidTransaction*
    * Occurrence: the transaction is invalid.
    * RPC code: 1010
    * RPC message: "Invalid Transaction"
  * *UnknownTransaction*
    * Occurrence: the transaction is unknown.
    * RPC code: 1011
    * RPC message: "Unknown Transaction Validity"
  * *TemporarilyBanned*
    * Occurrence: the transaction is temporarily banned.
    * RPC code: 1012
    * RPC message: "Transaction is temporarily banned"
  * *AlreadyImported*
    * Occurrence: the transaction was already imported.
    * RPC code: 1013
    * RPC message: "Transaction Already Imported"
  * *TooLowPriority*
    * Occurrence: the transaction has too low priority.
    * RPC code: 1014
    * RPC message: "The transaction has too low priority to replace another transaction already in the pool"
  * *CycleDetected*
    * Occurrence: a cycle has been detected.
    * RPC code: 1015
    * RPC message: "Cycle Detected"
  * *ImmediatelyDropped*
    * Occurrence: transaction pool limit reached.
    * RPC code: 1016
    * RPC message: "The transaction couldn't enter the pool because of the limit"
* *UnsupportedKeyType*
  * Occurrence: key type ID has some unsupported crypto.
  * RPC code: 1017
  * RPC message: "The crypto for the given key type is unknown, please add the public key to the request to insert the key successfully"

### author_submitExtrinsic

**Warning**: This method is [UNSAFE](#Safety).

Submit hex-encoded extrinsic for inclusion in block.

#### Parameters

* `STRING` - A SCALE encoded extrinsic represented as hex.

#### Returns

* `STRING` - The resulting transaction hash of the extrinsic.

#### Example

```bash
```

### author_pendingExtrinsics

Returns all pending extrinsics, potentially grouped by sender.

#### Parameters

None.

#### Returns

* `ARRAY`
  * `STRING` - (OPTIONAL) SCALE encoded extrinsic represented as hex.

#### Example

*TODO*: Add an example where the extrinsic is visible.

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_pendingExtrinsics", "params":[]}'

// Response
{"jsonrpc":"2.0","result":[],"id":1}
```

### author_removeExtrinsic

**Warning**: This method is [UNSAFE](#Safety).

Remove given extrinsic from the pool and temporarily ban it to prevent reimporting.

#### Parameters

* `STRING` - SCALE encoded array of extrinsics or its hash represented as hex.

#### Returns

* `ARRAY`
  * `STRING` - (OPTIONAL) Hex encoded hash of extrinsic that was removed.

#### Example

```bash
```

### author_insertKey

**Warning**: This method is [UNSAFE](#Safety).

Insert a key into the keystore.

#### Parameters

* `STRING` - [Key type](#Key-types).
* `STRING` - Hex encoded seed.
* `STRING` - Hex encoded public key.

#### Returns

None.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_insertKey", "params":["dumy", "0x3fb882f70b4ddf5f8923f4a2d3b30a20f79bc0c5de212c1a8977f4972272db8d", "0x5ebf69cfbb4914711f70ff3b9e7455f7d5006b15f220d011387038cf4fb1593e"]}'

// Response
{"jsonrpc":"2.0","result":null,"id":1}
```

### author_rotateKeys

**Warning**: This method is [UNSAFE](#Safety).

Generate new session keys and returns the corresponding public keys.

#### Parameters

None.

#### Returns

* `STRING` - SCALE encoded keys represented as hex.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_rotateKeys", "params":[]}'

// Response
{"jsonrpc":"2.0","result":"0x8c0baa0b4cf42e669a3805c1d6405926c9adf0691f854a6ddaffde3abc1dbd6b7c70cc7d2a731186ec54e26e0b0509667376d818643a5969549e44a76dc42f5a041b0120d2fc6d686e1bec66f596ddcce78da4029a23b3c213c55d2a064e9c26a20ab338080835b845e71573c3197795b729a1015b504a8352ee7dcbce92296c28bcc393e3cb1b18f597c597a458e21f706374e75f35445132977a66519d731d","id":1}
```

### author_hasSessionKeys

Checks if the keystore has private keys for the given session public keys.

#### Parameters

* `STRING` - SCALE encoded, concatenated keys represented as hex.

#### Returns

* `BOOL` - Returns `true` if all private keys could be found, `false` if otherwise.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_hasSessionKeys", "params":["0x8c0baa0b4cf42e669a3805c1d6405926c9adf0691f854a6ddaffde3abc1dbd6b7c70cc7d2a731186ec54e26e0b0509667376d818643a5969549e44a76dc42f5a041b0120d2fc6d686e1bec66f596ddcce78da4029a23b3c213c55d2a064e9c26a20ab338080835b845e71573c3197795b729a1015b504a8352ee7dcbce92296c28bcc393e3cb1b18f597c597a458e21f706374e75f35445132977a66519d731d"]}'

// Response
{"jsonrpc":"2.0","result":true,"id":1}
```

### author_hasKey

Checks if the keystore has private keys for the given public key and key type.

#### Parameters

* `STRING` - Hex-encoded public key.
* `STRING` - [Key type](#Key-types).

#### Returns

* `BOOL` - Returns `true` if a private key could be found, `false` if otherwise.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "author_hasKey", "params":["0x5ebf69cfbb4914711f70ff3b9e7455f7d5006b15f220d011387038cf4fb1593e", "dumy"]}'

// Response
{"jsonrpc":"2.0","result":true,"id":1}
```

### author_submitAndWatchExtrinsic (pubsub)

Submit an extrinsic and watch.

This endpoint communicates over the Websocket protocol.

#### Parameters

* `STRING` - Hex-encoded extrinsic.

#### Returns

TODO

#### Example

```bash

```

### author_unwatchExtrinsic (pubsub)

Unsubscribe from extrinsic watching.

This endpoint communicates over the Websocket protocol.

#### Parameters

None.

#### Returns

TODO

#### Example

```bash

```

## Chain

Blockchain RPC API.

### Chain Errors

RPC error codes are in the `3000` - `3999` range. No known error types are specified.

### chain_getHeader

Get header of a relay chain block. If no block hash is provided, the latest block header will be returned.

#### Parameters

* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `OBJECT` - (OPTIONAL).
  * `"parentHash"`: `STRING` - Hex encoded parent hash.
  * `"number"`: `STRING` - Hex encoded block number.
  * `"stateRoot"`: `STRING` - Hex encoded state trie merkle root.
  * `"extrinsicsRoot"`: `STRING` - Hex encoded merkle root of the extrinsics.
  * `"digest"`: `OBJECT` - Chain-specific digest of data useful for light clients or auxiliary data.
    * `"logs"`: `ARRAY` - A list of logs in the digest.
      * `STRING` - Hex encoded digest logs of opaque nature.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "chain_getHeader", "params":[]}'

// Response
{"jsonrpc":"2.0","result":{"digest":{"logs":["0x064241424534020b000000497fb90f00000000","0x05424142450101f4b34c2a153dc4912c859ac9542c4345911ed0c1cae18c9704d6566f2689ac158681adfd0410a9e1c97a50b0c455af1b4d5447cbd4c4da1a6ebcd53ee5d3ee89"]},"extrinsicsRoot":"0x01f31561613c605d96d0572b7dda3884ccc2f9f890538974007eb610784216d9","number":"0x12d2a9","parentHash":"0x281270fff803f40aad2f5e6bc113f6814060cc2f435bf6e4526795ec9d73a62d","stateRoot":"0xc51f09252a24f7965c892a4f57d5ec5985830ac90b32da0a045b92457ebc5b39"},"id":1}
```

### chain_getBlock

Get header and body of a relay chain block. If no block hash is provided, the latest block body will be returned.

#### Parameters

* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `OBJECT` - (OPTIONAL)
  * `"block"`: `OBJECT`
    * `"extrinsics"`: `ARRAY`
      * `STRING` - Hex encoded extrinsic.
    * `"header"`: `OBJECT`
      * `"parentHash"`: `STRING` - Hex encoded parent hash.
      * `"number"`: `STRING` - Hex encoded block number.
      * `"stateRoot"`: `STRING` - Hex encoded state trie merkle root.
      * `"extrinsicsRoot"`: `STRING` - Hex encoded merkle root of the extrinsics.
      * `"digest"`: `OBJECT` - Chain-specific digest of data useful for light clients or auxiliary data.
        * `"logs"`: `ARRAY` - A list of logs in the digest.
          * `STRING` - Hex encoded digest logs of opaque nature.
  * `"justification"`: `STRING` - (OPTIONAL) The hex encoded justification.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "chain_getBlock", "params":[]}'

// Response
{"jsonrpc":"2.0","result":{"block":{"extrinsics":["0x280402000bb0019c8b7001","0x1c0409006a4b4b00","0x1004140000"],"header":{"digest":{"logs":["0x06424142453402610000007d7fb90f00000000","0x0542414245010166b01406e966b6604ea996cda5355c5f24fffee6cb2082802105f136b456c9412855a0cce4058f08ccf9ce822cd94a6ae786037a8566310765a043a09514488a"]},"extrinsicsRoot":"0x1ce1236c8262cead39a2a758fc4cdba0b918f309e5a8572c288c5ba2c16aa7a7","number":"0x12d2dd","parentHash":"0x78b7af6942c220ec33945f228f1e17383403561f8d7bbc02da2c79650f22fdbe","stateRoot":"0xa6387842acac9315ad4424828f571c348a40bdfb9f9b4cb4951bcb76e43dacfb"}},"justification":null},"id":1}
```

### chain_getBlockHash

Get hash of the 'n-th' block in the canon chain. If no parameters are provided, the latest block hash gets returned.

Alias: `chain_getHead`

#### Parameters

One of the following types is allowed:

* `STRING` - (OPTIONAL) Hex encoded value indicating the 'n-th' block in the chain.
* `U32` - (OPTIONAL) Value indicating the 'n-th' block in the chain.
* `ARRAY` - (OPTIONAL) Multiple values, where each value can be one of the following types:
  * `STRING` - (OPTIONAL) Hex encoded value indicating the 'n-th' block in the chain.
  * `U32` - (OPTIONAL) Value indicating the 'n-th' block in the chain.

#### Returns

 One of the following types gets returned, depending on the provided parameters:

* `STRING` - (OPTIONAL) Hex encoded block hash.
* `ARRAY`
  * `STRING` - (OPTIONAL) Hex encoded block hash

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "chain_getBlockHash", "params":[50]}'

// Response
{"jsonrpc":"2.0","result":"0x4fee9b1803132954978652e4d73d4ec5b0dffae3832449cd5e4e4081d539aa22","id":1}

// Request (multiple blocks specified)
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "chain_getBlockHash", "params":[[50, "0x64", 200]]}'

// Response
{"jsonrpc":"2.0","result":["0x4fee9b1803132954978652e4d73d4ec5b0dffae3832449cd5e4e4081d539aa22","0x46781d9a3350a0e02dbea4b5e7aee7c139331a65b2cd736bb45a824c2f3ffd1a","0x0f82403bcd4f7d4d23ce04775d112cd5dede13633924de6cb048d2676e322950"],"id":1}
```

### chain_getFinalizedHead

Get hash of the last finalized block in the canon chain.

Alias: `chain_getFinalisedHead`

#### Parameters

None.

#### Returns

* `STRING` - Hex encoded hash of the last finalized block.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "chain_getFinalizedHead", "params":[]}'

// Response
{"jsonrpc":"2.0","result":"0x00b8360db070d20fb2bc700a73240c65acb590d26ae8c477b0add48a3695bd35","id":1}
```

## Offchain

Blockchain RPC API.

### Offchain Errors

RPC error codes are in the `5000` - `5999` range. No known error types are specified.

### Storage kinds

The following Storage kinds are available:

* "PERSISTENT" - is non-revertible and not fork-aware. It means that any value set by the offchain worker is persisted even if that block (at which the worker is called) is reverted as non-canonical (meaning that the block was surpassed by a longer chain). The value is available for the worker that is re-run at the new (different block with the same block number) and future blocks. This storage can be used by offchain workers to handle forks and coordinate offchain workers running on different forks.
* "LOCAL" - is revertible and fork-aware. It means that any value set by the offchain worker triggered at a certain block is reverted if that block is reverted as non-canonical. The value is NOT available for the worker that is re-run at the next or any future blocks.

### offchain_localStorageSet

Set offchain local storage under given key and prefix.

#### Parameters

* `STRING` - [Storage kind](#Storage-kinds).
* `STRING` - Hex encoded key.
* `STRING` - Hex encoded value.

#### Returns

None.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "offchain_localStorageSet", "params":["PERSISTENT","0x4B6579","0x56616C7565"]}'

// Response
{"jsonrpc":"2.0","result":null,"id":1}
```

### offchain_localStorageGet

Get offchain local storage under given key and prefix.

#### Parameters

* `STRING` - [Storage kind](#Storage-kinds).
* `STRING` - Hex encoded key.

#### Returns

* `STRING` - (OPTIONAL) A hex encoded key.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "offchain_localStorageGet", "params":["PERSISTENT","0x4B6579"]}'

// Response
{"jsonrpc":"2.0","result":"0x56616c7565","id":1}
```

## State

State RPC API.

### State Errors

RPC error codes are in the `4000` - `4999` range. No known error types are specified.

### Common types

#### Child info

*NOTE: This type is future-reserved, specification will be adjusted.*.

#### Child type

*NOTE: This type is future-reserved, specification will be adjusted.*.

Child type is a future-reserved feature which allows the usage of different child storage types. The currently allowed value is an i32 integer equal to 1.

#### State Errors

*NOTE: This type is future-reserved, specification will be adjusted.*.

### state_call

*NOTE: This API is future-reserved, specification will be adjusted.*.

Call a contract at a block's state.

#### Parameters

#### Returns

#### Example

```bash
```

### state_getPairs

**Warning**: This method is [UNSAFE](#Safety).

Returns the keys with prefix, leave empty to get all the keys.

#### Parameters

* `STRING` - Hex encoded prefix.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `ARRAY`
  * `ARRAY` - (OPTIONAL)
    * `STRING` - Hex encoded storage key
    * `STRING` - Hex encoded storage data

#### Example

*TODO:* Empty prefix shouldn't requite `0x`.

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getPairs", "params":["0x", null]}'

// Response (shortened)
{"jsonrpc":"2.0","result":[["0x0b76934f4cc08dee01012d059e1b83eebbd108c4899964f707fdaffb82636065","0x00"],["0x11f3ba2e1cdd6d62f2ff9b5589e7ff816254e9d55588784fa2a62b726696e2b1","0x7b000000"]],"id":1}
```

### state_getKeysPaged

**Warning**: This method is [UNSAFE](#Safety).

Returns the keys with prefix with pagination support.

#### Parameters

* `STRING` - (OPTIONAL) Hex encoded prefix.
* `U32` - Amount of keys to be return.
* `STRING` - (OPTIONAL) Hex encoded storage key after which the next keys should be returned in lexicographic order.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `ARRAY`
  * `STRING` - (OPTIONAL) Storage key

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getKeysPaged", "params":[null, 2]}'

// Response
{"jsonrpc":"2.0","result":["0x0b76934f4cc08dee01012d059e1b83ee5e0621c4869aa60c02be9adcc98a0d1d","0x0b76934f4cc08dee01012d059e1b83eebbd108c4899964f707fdaffb82636065"],"id":1}
```

### state_getStorage

Returns a storage entry at a specific block's state. If not block hash is provided, the latest value is returned.

#### Parameters

* `STRING` - Hex encoded storage key.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `STRING` - (OPTIONAL) Hex encoded storage data.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getStorage", "params":["0xc2261276cc9d1f8598ea4b6a74b15c2f6482b9ade7bc6657aaca787ba1add3b458ad08561bd8f502d2ba488697d10b58aaa7c4097d4abb1c8861495348fd6970", null]}'

// Response
{"jsonrpc":"2.0","result":"0x00e40b54020000000000000000000000","id":1}
```

### state_getStorageHash

Returns the hash of a storage entry at a block's state. If no block hash is provided, the latest value is returned.

#### Parameters

* `STRING` - Hex encoded storage key
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `STRING` - (OPTIONAL) Hex encoded hash of the storage entry.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getStorageHash", "params":["0xc2261276cc9d1f8598ea4b6a74b15c2f6482b9ade7bc6657aaca787ba1add3b458ad08561bd8f502d2ba488697d10b58aaa7c4097d4abb1c8861495348fd6970", "0x579deccea7183c2afedbdaea59ad23e970458186afc4d57d5577842d4a219925"]}'

// Response
{"jsonrpc":"2.0","result":"0x7155ca82321b189fc7b9009d9a0c2ebffba28aad222e28986543f266a65064eb","id":1}
```

### state_getStorageSize

Returns the size of a storage entry at a block's state. If no block hash is provided, the latest value is used.

#### Parameters

* `STRING` - Hex encoded storage key.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `U64` - (OPTIONAL) The size of the storage entry in bytes.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getStorageSize", "params":["0xc2261276cc9d1f8598ea4b6a74b15c2f6482b9ade7bc6657aaca787ba1add3b458ad08561bd8f502d2ba488697d10b58aaa7c4097d4abb1c8861495348fd6970", null]}'

// Response
{"jsonrpc":"2.0","result":16,"id":1}
```

### state_getChildKeys

**Warning**: This method is [UNSAFE](#Safety).

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns the keys with prefix from a child storage. Leave the prefix empty to get all the keys.

#### Parameters

* `STRING` - Hex encoded storage key.
* `STRING` - [Child info](#child-info).
* `U32` - [Child type](#child-type).
* `STRING` - Prefix.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `ARRAY`
  * `STRING` - (OPTIONAL) Storage key.

#### Example

```bash
```

### state_getChildStorage

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns a child storage entry at a specific block's state.

#### Parameters

* `STRING` - Hex encoded storage key.
* `STRING` - [Child info](#child-info).
* `U32` - [Child type](#child-type).
* `STRING` - Hex encoded storage key.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `STRING` - (OPTIONAL) Storage data.

#### Example

```bash
```

### state_getChildStorageHash

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns the hash of a child storage entry at a block's state.

#### Parameters

* `STRING` - Hex encoded storage key.
* `STRING` - [Child info](#child-info).
* `U32` - [Child type](#child-type).
* `STRING` - Hex encoded storage key.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `STRING` - (OPTIONAL) Hex encoded hash of the child storage.

#### Example

```bash
```

### state_getChildStorageSize

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns the size of a child storage entry at a block's state.

#### Parameters

* `STRING` - Storage key.
* `STRING` - Child info.
* `U32` - Child type.
* `STRING` - Storage key.
* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `U64` - (OPTIONAL) The size of the storage entry in bytes.

#### Example

```bash
```

### state_getRuntimeVersion

Get the runtime version at a given block. If no block hash is provided, the latest version gets returned.

Alternatively, the [state_subscribeRuntimeVersion](#state_subscribeRuntimeVersion-pubsub) Websocket subscription endpoint can be used.

#### Parameters

* `STRING` - (OPTIONAL) Hex encoded block hash.

#### Returns

* `OBJECT`
  * `"specName"`: `STRING` - Name of the runtime.
  * `"implName"`: `STRING` - Name of the implementation of the specification.
  * `"authoringVersion"`: `U32` - Version of the authorship interface.
  * `"specVersion"`: `U32` - Version of the runtime specification.
  * `"implVersion"`: `U32` - Version of the implementation of the specification.
  * `"apis"`: `ARRAY` - List of supported API features along with their version.
    * `ARRAY` - (OPTIONAL)
      * `STRING` - Hex encoded feature name
      * `U32` - Version of the feature

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_getRuntimeVersion", "params":[]}'

// Response
{"jsonrpc":"2.0","result":{"apis":[["0xdf6acb689907609b",2],["0x37e397fc7c91f5e4",1],["0x40fe3ad401f8959a",4],["0xd2bc9897eed08f15",1],["0xf78b278be53f454c",2],["0xaf2c0297a23e6d3d",2],["0xed99c5acb25eedf5",2],["0xcbca25e39f142387",1],["0x687ad44ad37f03c2",1],["0xab3c0572291feb8b",1],["0xbc9d89904f5b923f",1],["0x37c8bb1350a9a2a8",1]],"authoringVersion":2,"implName":"parity-kusama","implVersion":0,"specName":"kusama","specVersion":1045},"id":1}
```

### state_queryStorage

**Warning**: This method is [UNSAFE](#Safety).

Query historical storage entries (by key) starting from a block given as the second parameter. If no ending block is specified, the query will end at the latest block.

**Note**: This first returned result contains the initial state of storage for all keys. Subsequent values in the vector represent changes to the previous state (diffs).

#### Parameters

* `ARRAY` - List of storage keys to query.
  * `STRING` - Hex encoded storage key.
* `STRING` - Hex encoded block hash from where to start the query.
* `STRING` - (OPTIONAL) Hex encoded block hash to where to end the query

#### Returns

* `ARRAY`
  * `OBJECT` - (OPTIONAL)
    * `"block"`: `STRING` - Hex encoded block hash at which a change occurred
    * `"changes"`: `ARRAY` - Mappings between keys and their corresponding (changed) values.
      * `ARRAY`
        * `STRING` - Hex encoded storage key.
        * `STRING` - Hex encoded value.

#### Example

```bash
// Request
curl -H "Content-Type: application/json" -d '{"id":1, "jsonrpc":"2.0", "method": "state_queryStorage", "params":[state_subscribeRuntimeVersionnull]}'

// Response
{"jsonrpc":"2.0","result":[{"block":"0xe99c87d6efab57a98706c10fa4bc4d39feaf51ca62ac3bae7a67bf17c8c305ec","changes":[["0xf2794c22e353e9a839f12faab03a911bf68967d635641a7087e53f2bff1ecad3c6756fee45ec79ead60347fffb770bcdf0ec74da701ab3d6495986fe1ecc3027","0xa80400fffe112179ba7e7a1549e6c45522901ab7ef7ee373c1797b0f58191c6b53c7831c0b00a0724e1809603153efe4c60f146d61b66d5c9f4a9b469291aa260899bd99083d755a28923d00ea56fa000000000000000000000000490f0600"]]}],"id":1}
```

### state_subscribeRuntimeVersion (pubsub)

Runtime version subscription.

This endpoint communicates over the Websocket protocol.

#### Parameters

None.

#### Returns

On command initialization:

* `U32` - Number of subscribers.

Subscribed messages:

* `OBJECT`
  * `"specName"`: `STRING` - Name of the runtime.
  * `"implName"`: `STRING` - Name of the implementation of the specification.
  * `"authoringVersion"`: `U32` - Version of the authorship interface.
  * `"specVersion"`: `U32` - Version of the runtime specification.
  * `"implVersion"`: `U32` - Version of the implementation of the specification.
  * `"apis"`: `ARRAY` - List of supported API features along with their version.
    * `ARRAY` - (OPTIONAL)
      * `STRING` - Hex encoded feature name
      * `U32` - Version of the feature

#### Example

```bash
> {"id":1, "jsonrpc":"2.0", "method": "state_subscribeRuntimeVersion", "params":[]}

< {"jsonrpc":"2.0","result":4,"id":1}

< {"jsonrpc":"2.0","method":"state_runtimeVersion","params":{"result":{"apis":[["0xdf6acb689907609b",3],["0x37e397fc7c91f5e4",1],["0x40fe3ad401f8959a",4],["0xd2bc9897eed08f15",2],["0xf78b278be53f454c",2],["0xaf2c0297a23e6d3d",3],["0xed99c5acb25eedf5",2],["0xcbca25e39f142387",2],["0x687ad44ad37f03c2",1],["0xab3c0572291feb8b",1],["0xbc9d89904f5b923f",1],["0x37c8bb1350a9a2a8",1]],"authoringVersion":2,"implName":"parity-kusama","implVersion":0,"specName":"kusama","specVersion":1062,"transactionVersion":1},"subscription":4}}
```

## Engine

### Engine Errors

*NOTE: This type is future-reserved, specification will be adjusted.*

Engine RPC API.

### engine_createBlock

*NOTE: This API is future-reserved, specification will be adjusted.*.

Instructs the manual-seal authorship task to create a new block.

#### Parameters

#### Returns

#### Example

```bash
```

### engine_finalizeBlock

*NOTE: This API is future-reserved, specification will be adjusted.*.

Instructs the manual-seal authorship task to finalize a block.

#### Parameters

#### Returns

#### Example

```bash
```

## Payment

Payment PRC API.

### Payment Errors

*NOTE: This type is future-reserved, specification will be adjusted.*

### payment_queryInfo

*NOTE: This API is future-reserved, specification will be adjusted.*.

#### Parameters

#### Returns

#### Example

```bash
```

## Contracts

Contracts RPC API.

### Contracts Errors

*NOTE: This type is future-reserved, specification will be adjusted.*

### contracts_call

*NOTE: This API is future-reserved, specification will be adjusted.*

Executes a call to a contract.

This call is performed locally without submitting any transactions. Thus executing this won't change any state. Nonetheless, the calling state-changing contracts is still possible.

This method is useful for calling getter-like methods on contracts.

#### Parameters

* `OBJECT`
  * `"origin"`: `STRING` - Hex encoded public key of the sender.
  * `"dest"`: `STRING` - Hex encoded public key of the receiver.
  * `"value"`: `U128` - Balance of the call.
  * `"gasLimit"`: `U64` - Gas limit.
  * `"inputData"`: `STRING`  - Hex encoded input of varying type.

#### Returns


#### Example

```bash
```

### contracts_getStorage

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns the value under a specified storage key in a contract given by an address at a certain block. If no block chash is provided, the latest values gets returned.

#### Parameters

* `STRING` - Hex encoded public key (address).
* `STRING` - Hex encoded storage key.
* `STRING` - Hex encoded block hash.

#### Returns

* `STRING` - (OPTIONAL) Hex encoded value of the storage key.

#### Example

```bash
```

### contracts_rentProjection

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns the projected time a given contract will be able to sustain paying its rent. The returned projection is relevant for the given block, i.e. it is as if the contract was accessed at the beginning of that block. Returns `null` if the contract is exempted from rent.

TODO: How is this projection calculated?

#### Parameters

* `STRING` - Hex encoded public key (address).
* `STRING` - Hex encoded block hash.

#### Returns

#### Example

```bash
```

## BABE

BABE RPC API.

### BABE Errors

*NOTE: This type is future-reserved, specification will be adjusted.*

### babe_epochAuthorship

*NOTE: This API is future-reserved, specification will be adjusted.*

Returns data about which slots (primary or secondary) can be claimed in the current epoch with the keys in the key store.

#### Parameters

None.

#### Returns

* `ARRAY`
  * `ARRAY`
    * `STRING` - Hex encoded public key that can claim the slots.
    * `OBJECT`
      * `"primary"`: `ARRAY` - array of primary slots that can be claimed.
        * `U64` - (OPTIONAL)
      * `"secondary"`: `ARRAY` - array of secondary slots that can be claimed.
        * `U64` - (OPTIONAL)

#### Example

```bash
```

## Copyright

Each PSP must be labeled as placed in the [public domain](https://creativecommons.org/publicdomain/zero/1.0/).
